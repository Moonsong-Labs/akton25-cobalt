<script>
  import { onMount } from "svelte";
  import { ethers } from "ethers";
  import "./styles.css";
  import Footer from "./components/Footer.svelte";
  import QuestLog from "./components/QuestLog.svelte";
  import Tavern from "./components/Tavern.svelte";

  // Contract ABIs
  const QUEST_ABI = [
    "event QuestStatusUpdated(uint256 indexed questId, uint8 status)",
    "event HeroEnrolled(uint256 indexed questId, uint256 indexed heroId)",
    "event TaskPerformed(uint256 indexed questId, uint256 indexed heroId, uint8 task)",
    "function joinQuest(uint256 questId, uint256 heroId)",
    "function performTask(uint256 questId, uint256 heroId, uint8 task)",
    "function questHeroes(uint256 questId) view returns (uint256[])",
    "function url(uint256 questId) view returns (string)",
  ];

  const TAVERN_ABI = [
    "function ownerOf(uint256 tokenId) view returns (address)",
    "function heroInfo(uint256 id) view returns ((string,uint256,string,uint256,(uint256,uint256,uint256,uint256,uint256,uint256)))",
  ];

  let isConnected = false;
  let account = "";
  let provider;
  let questContract;
  let tavernContract;
  let questStatus = "not_joined";
  let currentRound = 1;
  let maxRounds = 3;
  let isLoading = false;
  let showHistory = false;
  let actionHistory = [];
  let activeQuests = [];
  let userHeroes = [];
  let showQuestLog = false;
  let showTavern = false;
  let eventLog = [];
  let showConnectionPrompt = false;
  let promptMessage = "";

  // Contract addresses (to be replaced with actual addresses)
  const QUEST_ADDRESS = "0x...";
  const TAVERN_ADDRESS = "0x...";

  let roundDescriptions = {
    1: "You find yourself at the entrance of a dark cave. The air is thick with the scent of damp earth and something... ancient.",
    2: "Deep within the cave, you encounter a mysterious altar with glowing runes.",
    3: "The final chamber reveals a treasure chest, but something feels off...",
  };

  const allActions = [
    {
      id: "romance",
      label: "Charm the mysterious figure with your wit",
      subtext: "(Romance Action)",
      function: "romanceTask()",
      taskId: 0,
    },
    {
      id: "fight",
      label: "Draw your sword and charge into battle",
      subtext: "(Fight Action)",
      function: "fightTask()",
      taskId: 1,
    },
    {
      id: "bribe",
      label: "Offer a pouch of gold for safe passage",
      subtext: "(Bribe Action - 0.01 ETH)",
      function: "bribeTask()",
      taskId: 2,
    },
    {
      id: "persuade",
      label: "Attempt to reason with the guardian",
      subtext: "(Persuade Action)",
      function: "persuadeTask()",
      taskId: 3,
    },
    {
      id: "sneak",
      label: "Use the shadows to slip past unnoticed",
      subtext: "(Sneak Action)",
      function: "sneakTask()",
      taskId: 4,
    },
  ];

  async function connectWallet() {
    try {
      if (window.ethereum) {
        provider = new ethers.BrowserProvider(window.ethereum);
        const accounts = await provider.send("eth_requestAccounts", []);
        account = accounts[0];
        isConnected = true;

        // Initialize contracts
        questContract = new ethers.Contract(QUEST_ADDRESS, QUEST_ABI, provider);
        tavernContract = new ethers.Contract(
          TAVERN_ADDRESS,
          TAVERN_ABI,
          provider
        );

        // Start listening to events
        setupEventListeners();

        // Load user's heroes
        await loadUserHeroes();
      } else {
        alert("Please install MetaMask to use this application!");
      }
    } catch (error) {
      console.error("Error connecting wallet:", error);
    }
  }

  async function loadUserHeroes() {
    try {
      // This would need to be implemented based on your contract's token enumeration
      // For now, we'll simulate it
      userHeroes = [
        { id: 1, name: "Sir Lancelot", level: 5 },
        { id: 2, name: "Lady Morgana", level: 3 },
      ];
    } catch (error) {
      console.error("Error loading heroes:", error);
    }
  }

  function setupEventListeners() {
    // Listen for quest status updates
    questContract.on("QuestStatusUpdated", (questId, status) => {
      addToEventLog(`Quest ${questId} status updated to ${status}`);
      checkUserQuests();
    });

    // Listen for hero enrollments
    questContract.on("HeroEnrolled", (questId, heroId) => {
      addToEventLog(`Hero ${heroId} joined quest ${questId}`);
      checkUserQuests();
    });

    // Listen for task performances
    questContract.on("TaskPerformed", (questId, heroId, task) => {
      addToEventLog(
        `Hero ${heroId} performed task ${task} in quest ${questId}`
      );
      checkUserQuests();
    });
  }

  function addToEventLog(message) {
    eventLog = [...eventLog, { message, timestamp: new Date() }];
    // Keep only last 50 messages
    if (eventLog.length > 50) {
      eventLog = eventLog.slice(-50);
    }
  }

  async function checkUserQuests() {
    try {
      // This would need to be implemented based on your contract's quest enumeration
      // For now, we'll simulate it
      activeQuests = [
        { id: 1, status: "IN_PROGRESS", currentRound: 2 },
        { id: 2, status: "OPEN", currentRound: 0 },
      ];
    } catch (error) {
      console.error("Error checking quests:", error);
    }
  }

  async function joinQuest() {
    try {
      questStatus = "pending";
      // Simulating blockchain response
      setTimeout(() => {
        questStatus = "accepted";
      }, 2000);
    } catch (error) {
      console.error("Error joining quest:", error);
      questStatus = "rejected";
    }
  }

  async function performAction(action) {
    try {
      isLoading = true;
      // Simulate blockchain interaction delay
      await new Promise((resolve) => setTimeout(resolve, 2000));

      actionHistory.push({
        round: currentRound,
        action: action.label,
        description: roundDescriptions[currentRound],
      });

      if (currentRound < maxRounds) {
        currentRound++;
      } else {
        showHistory = true;
      }
    } catch (error) {
      console.error("Error performing action:", error);
    } finally {
      isLoading = false;
    }
  }

  function showPrompt(message) {
    promptMessage = message;
    showConnectionPrompt = true;
    setTimeout(() => {
      showConnectionPrompt = false;
    }, 3000);
  }

  function handleNavClick(type) {
    if (!isConnected) {
      showPrompt("Connect your wallet to view the " + type);
    } else {
      if (type === "log") {
        showQuestLog = !showQuestLog;
      } else {
        showTavern = !showTavern;
      }
    }
  }
</script>

<svelte:head>
  <title>Dungeons & Dragons - OnChain Adventures</title>
  <link
    href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=MedievalSharp&display=swap"
    rel="stylesheet"
  />
</svelte:head>

<div class="max-w-7xl mx-auto px-8 py-16 relative">
  <!-- Background Elements -->
  <div class="background-container">
    <div class="background-element dragon">
      <svg
        fill="#a69e6e"
        version="1.1"
        id="Layer_1"
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink"
        viewBox="0 0 260 201"
        enable-background="new 0 0 260 201"
        xml:space="preserve"
        stroke="#a69e6e"
        ><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g
          id="SVGRepo_tracerCarrier"
          stroke-linecap="round"
          stroke-linejoin="round"
        ></g><g id="SVGRepo_iconCarrier">
          <path
            d="M149,199h-47c2.03-1.37,5.4-4.44,5.4-9.07c0-4.45-1.23-10.78-4.54-19.64c4.24-4.58,7.36-9.96,9.1-15.65 c1.98,0.63,4,1.29,6.08,1.98c5.6,1.82,11.68,3.81,18.39,5.61c-3.62,5.24-8.52,10.03-15.13,14.49c-2.4,1.62-3.22,2.7-3.22,5.11 c0,3.62,4.61,6.63,9.25,8.04c3.76,1.13,7.82,1.62,11.77,1.62C144,191.49,147.55,195.03,149,199z M218.05,72.03l-4.49-4.3 c-3.11-3.67-3.49-9.1-5.91-14.59c-3.52-7.97-8.34-12.64-8.34-12.64c0,5.81-1.95,9.69-1.95,9.69s-6.913-3.684-15.93-2.594 c-8.273,0.051-15.984-4.923-19.177-12.833l-0.004-0.012c0,0,0,0.001,0,0.002c0-0.001,0-0.001-0.001-0.002c0,0.002,0,0.003,0,0.005 c-0.022,0.096-2.412,10.786,6.841,17.523c-0.141,0.095-0.282,0.191-0.423,0.29c-5.781,1.893-12.294,0.105-16.256-4.751 c0,0.002,0.001,0.003,0.002,0.005l-0.003-0.004c0,0-0.919,7.026,3.562,11.238c1.375,1.292,2.884,1.848,4.316,2.004 c-2.67,3.911-4.536,8.514-4.637,13.37c-0.29,13.52,8.12,20.92,17.22,30.84c1.53,1.34,2.5,3.33,2.5,5.539 c0,4.303-3.962,7.804-8.23,7.374c-4.115-0.414-8.379-4.481-11.266-7.175c-7.329-6.841-12.454-15.849-15.261-25.43 c-1.76-6.005-2.62-12.264-2.62-18.519c0-12.514,3.43-24.058,9.213-33.344C129.54,14.043,103.522,2,75,2c-3.054,0-7.021,0.72-10,1 c13.029,8.254,23.009,21.897,23.009,38.458c0,14.355-6.497,27.193-16.705,35.738c17.203,2.939,30.931,16.07,34.737,32.962 c-8.818,1.353-17.058,3.841-24.699,7.176c-20.862,9.094-36.37,25.717-48.457,34.706c-1.908,1.419-4.804,2.499-7.367,2.499 c-8.38,0-12.193-9.026-8.635-15.819c4.915-9.333,19.218-20.384,19.218-29.515c0-7.515-5.694-12.342-9.32-14.656 c3.287-2.931,7.286-4.654,11.409-5.135L10.019,80.59l9.843,27.831c0.316-3.949,1.769-7.826,4.343-11.121 c3.537,3.285,8.617,10.011,1.405,17.224c-4.74,4.731-8.112,7.083-14.496,12.806c-0.027,0.024-0.051,0.05-0.078,0.074 C5.651,131.931,2,138.414,2,146c0,13.635,11.28,24.987,24.915,24.987c7.923,0,14.914-4.354,20.727-9.365 c4.583-3.951,9.449-7.745,14.78-10.653c6.91-3.769,14.532-5.576,22.34-5.875c-1.204,11.92-11.267,21.223-23.505,21.223 c-3.397,0-6.614-0.718-9.542-2.002c-0.538,2.057-1.113,4.907-1.008,8.023c0.32,9.513,3.383,12.346,3.383,17.592 c0,4.629-3.055,7.699-5.09,9.07h47c-1.45-3.973-5.317-7.509-10.219-7.509c-3.942,0-8.002-0.487-11.766-1.624 c-4.644-1.403-9.196-3.871-9.196-7.489c0-2.412,1.614-3.895,4.157-3.852c2.407,0.18,5.37,0.318,7.788,0.18 c15.684-1.395,29.47-14.543,31.833-29.924c13.101,3.87,27.568,9.741,46.207,12.713c3.75,8.219,8.774,21.149,7.124,28.434 c-0.983,4.342-2.892,7.699-4.928,9.07h47c-1.45-3.973-5.48-7.509-10.382-7.509c-3.942,0-8.002-0.487-11.766-1.624 c-4.644-1.403-7.156-4.417-7.845-9.067c-0.287-1.939-1.396-12.691-0.516-17.525c-0.044,0.255,7.17-0.451,7.685-0.516 c3.472-0.442,6.772-0.84,10.014-2.227c18.028-7.715,25.755-29.56,17.947-47.195c-3.379-7.631-8.97-13.953-15.117-19.486 c-4.76-4.285-10.335-7.959-14.539-12.82c-3.53-4.07-2.66-8.4-0.45-10.71c2.68-2.81,8.15-2.97,10.69,0.14 c2.45,3,8.39,9.93,11.42,13.45c1.11,1.29,2.9,1.75,4.5,1.16l4.35-1.63l-3.48-1.49c0,0-3.44-7.56-4.68-10.65l11.22,5.61l-0.57,4.76 l5.61-5.52C219.24,75.01,219.22,73.15,218.05,72.03z M211,199h47c-1.44-3.97-4.83-7.51-9.73-7.51c-3.94,0-8.04-0.38-11.77-1.62 c-8.95-2.99-19.88-22.38-28.66-36.22c-4.06,4.88-9.27,8.77-15.21,11.25c10.52,8.39,23.09,19.46,23.95,25.03 C217.26,194.33,213.03,197.63,211,199z M232.169,107.101c7.686,1.971,20.475,1.485,25.831-10.101 c-12.767,8.545-22.676,2.046-22.676,2.046s6.064-3.836,5.33-9.26c-16.747,6.282-27.99-3.654-27.99-3.654 C215.175,97.767,225.262,105.33,232.169,107.101z"
          ></path>
        </g></svg
      >
    </div>
    <div class="background-element sword-fight">
      <svg
        height="200px"
        width="200px"
        version="1.1"
        id="Layer_1"
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink"
        viewBox="0 0 512.32 512.32"
        xml:space="preserve"
        fill="#000000"
        ><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g
          id="SVGRepo_tracerCarrier"
          stroke-linecap="round"
          stroke-linejoin="round"
        ></g><g id="SVGRepo_iconCarrier">
          <g transform="translate(1 1)">
            <g>
              <path
                style="fill:#63D3FD;"
                d="M43.516,499.373L11.943,467.8c-4.267-4.267-4.267-11.947,0-16.213l6.827-8.533 c4.267-4.267,11.947-4.267,16.213,0l32.427,31.573c4.267,4.267,4.267,11.947,0,16.213l-7.68,7.68 C55.463,503.64,47.783,503.64,43.516,499.373"
              ></path>
              <path
                style="fill:#63D3FD;"
                d="M148.476,361.987L148.476,361.987c-14.507-14.507-23.893-32.427-27.307-52.053 c-1.707-11.093,5.973-21.333,17.067-20.48c7.68,0,14.507,5.973,16.213,13.653c2.56,12.8,8.533,24.747,17.92,34.133 c10.24,10.24,22.187,16.213,35.84,18.773c7.68,1.707,13.653,8.533,13.653,16.213l0,0c0,10.24-9.387,18.773-19.627,17.067 C182.609,386.733,162.983,377.347,148.476,361.987"
              ></path>
              <path
                style="fill:#63D3FD;"
                d="M467.623,499.373l31.573-31.573c4.267-4.267,4.267-11.947,0-16.213l-7.68-8.533 c-4.267-4.267-11.947-4.267-16.213,0l-32.427,31.573c-4.267,4.267-4.267,11.947,0,16.213l7.68,7.68 C455.676,503.64,462.503,503.64,467.623,499.373"
              ></path>
              <path
                style="fill:#63D3FD;"
                d="M361.809,361.987L361.809,361.987c14.507-14.507,23.893-32.427,27.307-52.053 c1.707-11.093-5.973-21.333-17.067-20.48c-7.68,0-14.507,5.973-16.213,13.653c-2.56,12.8-8.533,24.747-17.92,34.133 c-10.24,10.24-22.187,16.213-35.84,18.773c-7.68,1.707-13.653,8.533-13.653,16.213l0,0c0,10.24,9.387,18.773,19.627,17.067 C328.529,386.733,347.303,377.347,361.809,361.987"
              ></path>
            </g>
            <g>
              <polygon
                style="fill:#FFE100;"
                points="63.143,471.213 39.249,447.32 136.529,350.04 160.423,373.933 "
              ></polygon>
              <polygon
                style="fill:#FFE100;"
                points="447.143,471.213 471.036,447.32 373.756,350.04 349.863,373.933 "
              ></polygon>
              <path
                style="fill:#FFE100;"
                d="M337.916,338.093c-8.533,8.533-19.627,14.507-30.72,17.92L38.396,86.36L7.676,7.853l78.507,30.72 l268.8,267.947C352.423,318.467,346.449,328.707,337.916,338.093"
              ></path>
              <path
                style="fill:#FFE100;"
                d="M207.356,255.32l-51.2,51.2c2.56,11.947,8.533,22.187,17.067,30.72 c8.533,8.533,19.627,14.507,30.72,17.92l52.053-52.053L207.356,255.32z"
              ></path>
              <polygon
                style="fill:#FFE100;"
                points="424.103,38.573 255.143,206.68 303.783,255.32 471.889,86.36 502.609,7.853 "
              ></polygon>
            </g>
            <path
              d="M63.143,479.747c-2.56,0-4.267-0.853-5.973-2.56l-23.893-23.893c-3.413-3.413-3.413-8.533,0-11.947l97.28-97.28 c1.707-1.707,3.413-2.56,5.973-2.56l0,0c2.56,0,4.267,0.853,5.973,2.56l23.893,23.893c3.413,3.413,3.413,8.533,0,11.947 l-96.427,97.28C68.263,478.893,65.703,479.747,63.143,479.747z M51.196,447.32l11.947,11.947l85.333-85.333l-11.947-11.947 L51.196,447.32z"
            ></path>
            <path
              d="M51.196,511.32c-5.12,0-10.24-1.707-14.507-5.973l0,0L5.116,473.773c-3.413-3.413-5.973-8.533-5.973-14.507 c0-5.12,1.707-10.24,5.973-14.507l7.68-7.68c7.68-7.68,20.48-7.68,28.16,0l32.427,31.573c3.413,3.413,5.973,8.533,5.973,14.507 c0,5.12-1.707,10.24-5.973,14.507l-7.68,7.68C61.436,508.76,56.316,511.32,51.196,511.32z M49.489,493.4 c0.853,0.853,2.56,0.853,4.267,0l7.68-7.68c0.853-0.853,0.853-1.707,0.853-2.56s0-1.707-0.853-2.56l-31.573-31.573 c-0.853-0.853-3.413-0.853-4.267,0l-7.68,7.68c-1.707,0.853-1.707,1.707-1.707,2.56s0,1.707,0.853,2.56L49.489,493.4z"
            ></path>
            <path
              d="M204.796,399.533c-1.707,0-2.56,0-4.267,0c-22.187-4.267-41.813-14.507-58.027-30.72l0,0c0,0,0,0-0.853-0.853 c-15.36-15.36-25.6-34.987-29.867-56.32c-1.707-7.68,0.853-16.213,5.973-22.187c5.12-5.973,12.8-9.387,20.48-8.533 c11.947,0,22.187,9.387,23.893,20.48c1.707,11.093,7.68,21.333,15.36,29.867c8.533,8.533,19.627,14.507,31.573,16.213 c11.947,1.707,20.48,12.8,20.48,24.747c0,7.68-3.413,15.36-9.387,20.48C216.743,396.973,210.769,399.533,204.796,399.533z M154.449,356.013c12.8,12.8,30.72,22.187,48.64,25.6c3.413,0.853,5.12-0.853,6.827-1.707c1.707-1.707,3.413-4.267,3.413-6.827 c0-4.267-2.56-7.68-6.827-8.533c-14.507-2.56-29.013-10.24-40.107-21.333c-11.093-11.093-17.92-24.747-20.48-39.253 c-0.853-3.413-4.267-6.827-7.68-6.827s-5.973,1.707-6.827,2.56c-1.707,1.707-2.56,5.12-1.707,7.68 C133.116,326.147,141.649,343.213,154.449,356.013l-5.973,5.973L154.449,356.013z"
            ></path>
            <path
              d="M280.743,238.253c-2.56,0-4.267-0.853-5.973-2.56c-3.413-3.413-3.413-8.533,0-11.947l153.6-153.6 c3.413-3.413,8.533-3.413,11.947,0c3.413,3.413,3.413,8.533,0,11.947l-153.6,153.6C285.009,237.4,283.303,238.253,280.743,238.253z "
            ></path>
            <path
              d="M447.143,479.747c-2.56,0-4.267-0.853-5.973-2.56l-97.28-97.28c-3.413-3.413-3.413-8.533,0-11.947l23.893-23.893 c3.413-3.413,8.533-3.413,11.947,0l97.28,97.28c3.413,3.413,3.413,8.533,0,11.947l-23.893,23.893 C451.409,478.893,448.849,479.747,447.143,479.747z M361.809,373.933l85.333,85.333l11.947-11.947l-85.333-85.333L361.809,373.933z "
            ></path>
            <path
              d="M459.089,511.32c-5.12,0-10.24-1.707-14.507-5.973l-7.68-7.68c-3.413-3.413-5.973-8.533-5.973-14.507 c0-5.12,1.707-10.24,5.973-14.507l31.573-31.573c7.68-7.68,20.48-7.68,28.16,0l7.68,7.68c3.413,3.413,5.973,8.533,5.973,14.507 c0,5.12-1.707,10.24-5.973,14.507l-31.573,31.573l0,0C469.329,508.76,464.209,511.32,459.089,511.32z M482.983,448.173 c-0.853,0-1.707,0-2.56,0.853L448.849,480.6c-0.853,0.853-0.853,1.707-0.853,2.56c0,0.853,0,1.707,0.853,2.56l7.68,7.68 c0.853,0.853,3.413,0.853,4.267,0l31.573-31.573c1.707-1.707,1.707-2.56,1.707-2.56c0-0.853,0-1.707-0.853-2.56l-7.68-7.68 C484.689,448.173,483.836,448.173,482.983,448.173z"
            ></path>
            <path
              d="M305.489,399.533c-5.973,0-11.947-1.707-16.213-5.973c-5.973-5.12-9.387-12.8-9.387-20.48 c0-11.947,8.533-22.187,20.48-24.747c11.093-1.707,22.187-7.68,31.573-17.067c8.533-8.533,13.653-18.773,15.36-29.867 c1.707-11.947,11.947-20.48,23.893-20.48c7.68,0,15.36,2.56,20.48,8.533c5.12,5.973,6.827,13.653,5.973,22.187 c-4.267,21.333-14.507,40.96-29.013,56.32c0,0,0,0-0.853,0.853l0,0c-16.213,16.213-35.84,26.453-58.027,30.72 C308.049,398.68,307.196,399.533,305.489,399.533z M372.903,297.987L372.903,297.987c-4.267,0-7.68,2.56-8.533,6.827 c-2.56,14.507-9.387,28.16-20.48,39.253c-11.947,11.093-25.6,18.773-40.107,21.333c-3.413,0.853-6.827,4.267-6.827,7.68 c0,2.56,0.853,5.12,3.413,6.827c0.853,0.853,3.413,2.56,6.827,1.707c18.773-3.413,35.84-12.8,48.64-25.6l0,0 c12.8-13.653,21.333-29.867,24.747-47.787c0.853-2.56,0-5.12-1.707-7.68C378.023,299.693,376.316,297.987,372.903,297.987z"
            ></path>
            <path
              d="M307.196,363.693c-2.56,0-4.267-0.853-5.973-2.56l-268.8-268.8c-0.853-0.853-1.707-1.707-1.707-2.56l-30.72-78.507 C-0.857,7.853-0.857,4.44,1.703,1.88s5.973-3.413,9.387-1.707l78.507,30.72c0.853,0,2.56,0,3.413,0.853l268.8,268.8 c1.707,1.707,2.56,5.12,2.56,7.68c-3.413,13.653-9.387,25.6-19.627,34.987l0,0c-10.24,9.387-21.333,16.213-34.133,19.627 C308.903,363.693,308.049,363.693,307.196,363.693z M45.223,82.093l263.68,263.68c8.533-2.56,15.36-7.68,22.187-13.653 c5.973-5.973,11.093-14.507,13.653-22.187L81.916,45.4l-58.88-23.04L45.223,82.093z"
            ></path>
            <path
              d="M306.343,315.053c-2.56,0-4.267-0.853-5.973-2.56l-230.4-230.4c-3.413-3.413-3.413-8.533,0-11.947 c3.413-3.413,8.533-3.413,11.947,0l230.4,230.4c3.413,3.413,3.413,8.533,0,11.947C310.609,314.2,308.903,315.053,306.343,315.053z"
            ></path>
            <path
              d="M203.089,363.693c-0.853,0-1.707,0-2.56,0c-12.8-3.413-24.747-10.24-34.133-19.627 c-9.387-10.24-16.213-22.187-19.627-34.987c-0.853-2.56,0-5.973,2.56-7.68l51.2-51.2c3.413-3.413,8.533-3.413,11.947,0l48.64,48.64 c1.707,1.707,2.56,3.413,2.56,5.973s-0.853,4.267-2.56,5.973l-52.053,52.053C207.356,362.84,205.649,363.693,203.089,363.693z M164.689,309.08c2.56,8.533,7.68,16.213,13.653,22.187c6.827,5.973,13.653,11.093,22.187,13.653l42.667-42.667l-35.84-35.84 L164.689,309.08z"
            ></path>
            <path
              d="M303.783,263.853c-2.56,0-4.267-0.853-5.973-2.56l-48.64-48.64c-3.413-3.413-3.413-8.533,0-11.947l168.96-168.96 c0.853-0.853,1.707-1.707,2.56-1.707l78.507-30.72c3.413-0.853,6.827,0,9.387,2.56c2.56,2.56,3.413,5.973,1.707,9.387 l-30.72,78.507c0,0.853-0.853,1.707-1.707,2.56l-168.107,168.96C308.049,263,305.489,263.853,303.783,263.853z M267.089,206.68 l35.84,35.84L465.063,82.093l23.04-58.88l-58.88,23.04L267.089,206.68z"
            ></path>
          </g>
        </g></svg
      >
    </div>
    <div class="background-element beer-mug">
      <svg
        viewBox="0 0 1024 1024"
        class="icon"
        version="1.1"
        xmlns="http://www.w3.org/2000/svg"
        fill="#000000"
        ><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g
          id="SVGRepo_tracerCarrier"
          stroke-linecap="round"
          stroke-linejoin="round"
        ></g><g id="SVGRepo_iconCarrier"
          ><path
            d="M857.6 345.6h-102.4v64h64v51.2c0 204.8-62.72 247.04-115.2 318.72C842.24 734.72 896 678.4 896 396.8c0-16.64 0-51.2-38.4-51.2z"
            fill="#FAC546"
          ></path><path
            d="M704 792.32c-3.84 0-7.68-1.28-10.24-5.12-3.84-5.12-3.84-10.24 0-15.36 7.68-11.52 16.64-21.76 24.32-32C764.16 683.52 806.4 629.76 806.4 460.8v-38.4h-51.2c-7.68 0-12.8-5.12-12.8-12.8v-64c0-7.68 5.12-12.8 12.8-12.8h102.4c51.2 0 51.2 48.64 51.2 64 0 279.04-52.48 345.6-200.96 394.24-1.28 1.28-2.56 1.28-3.84 1.28zM768 396.8h51.2c7.68 0 12.8 5.12 12.8 12.8v51.2c0 174.08-44.8 235.52-90.88 291.84C839.68 711.68 883.2 645.12 883.2 396.8c0-25.6-3.84-38.4-25.6-38.4h-89.6v38.4z"
            fill="#231C1C"
          ></path><path
            d="M755.2 819.2c0 28.16 0 76.8-76.8 76.8H320c-76.8 0-76.8-48.64-76.8-76.8V256h512v563.2z"
            fill="#FAC546"
          ></path><path
            d="M678.4 908.8H320c-89.6 0-89.6-62.72-89.6-89.6V256c0-7.68 5.12-12.8 12.8-12.8h512c7.68 0 12.8 5.12 12.8 12.8v563.2c0 26.88 0 89.6-89.6 89.6zM256 268.8v550.4c0 28.16 0 64 64 64h358.4c64 0 64-35.84 64-64V268.8H256z"
            fill="#231C1C"
          ></path><path
            d="M358.4 832c-7.68 0-12.8-5.12-12.8-12.8V448c0-7.68 5.12-12.8 12.8-12.8s12.8 5.12 12.8 12.8v371.2c0 7.68-5.12 12.8-12.8 12.8zM499.2 832c-7.68 0-12.8-5.12-12.8-12.8V448c0-7.68 5.12-12.8 12.8-12.8s12.8 5.12 12.8 12.8v371.2c0 7.68-5.12 12.8-12.8 12.8z"
            fill="#231C1C"
          ></path><path
            d="M640 832c-7.68 0-12.8-5.12-12.8-12.8V448c0-7.68 5.12-12.8 12.8-12.8s12.8 5.12 12.8 12.8v371.2c0 7.68-5.12 12.8-12.8 12.8z"
            fill="#231C1C"
          ></path><path
            d="M720.64 166.4c-3.84 0-7.68 0-11.52 1.28-14.08-24.32-38.4-39.68-66.56-39.68-34.56 0-81.92-19.2-92.16 12.8-10.24-10.24-6.4 25.6-21.76 25.6h-1.28c-6.4-57.6-51.2-64-107.52-64-48.64 0-89.6-3.84-103.68 42.24-12.8-10.24-5.12 8.96-23.04 8.96-43.52 0-76.8 11.52-76.8 57.6S225.28 256 268.8 256h11.52v83.2c0 17.92 14.08 32 32 32s32-14.08 32-32V256h51.2v179.2c0 14.08 16.64 25.6 38.4 25.6s38.4-11.52 38.4-25.6V256h89.6v64c0 21.76 16.64 38.4 38.4 38.4s38.4-16.64 38.4-38.4v-64h80.64c33.28 0 47.36 10.24 47.36-25.6s-12.8-64-46.08-64z"
            fill="#FFFFFF"
          ></path><path
            d="M435.2 473.6c-28.16 0-51.2-16.64-51.2-38.4V268.8h-25.6v70.4c0 24.32-20.48 44.8-44.8 44.8S268.8 363.52 268.8 339.2V268.8h-1.28c-21.76 0-37.12 0-47.36-7.68-11.52-8.96-14.08-25.6-14.08-49.92 0-46.08 30.72-70.4 89.6-70.4h1.28v-1.28c1.28-2.56 5.12-8.96 11.52-10.24h1.28C327.68 88.32 368.64 89.6 408.32 89.6h11.52c35.84 0 90.88 0 112.64 46.08 2.56-3.84 5.12-7.68 10.24-8.96C558.08 104.96 588.8 108.8 614.4 112.64c10.24 1.28 19.2 2.56 28.16 2.56 29.44 0 55.04 14.08 72.96 38.4 39.68-3.84 65.28 26.88 65.28 76.8 0 11.52-1.28 24.32-10.24 32-8.96 7.68-20.48 7.68-33.28 6.4-5.12 0-10.24-1.28-16.64-1.28H652.8v51.2c0 28.16-23.04 51.2-51.2 51.2s-51.2-23.04-51.2-51.2v-51.2h-64v166.4c0 23.04-23.04 39.68-51.2 39.68z m-89.6-230.4h51.2c7.68 0 12.8 5.12 12.8 12.8v179.2c0 5.12 10.24 12.8 25.6 12.8s25.6-7.68 25.6-12.8V256c0-7.68 5.12-12.8 12.8-12.8h89.6c7.68 0 12.8 5.12 12.8 12.8v64c0 14.08 11.52 25.6 25.6 25.6s25.6-11.52 25.6-25.6v-64c0-7.68 5.12-12.8 12.8-12.8h80.64c6.4 0 12.8 0 17.92 1.28 5.12 0 12.8 1.28 14.08 0 0 0 1.28-2.56 1.28-14.08 0-19.2-3.84-51.2-34.56-51.2-2.56 0-6.4 0-8.96 1.28-5.12 1.28-11.52-1.28-14.08-6.4C686.08 153.6 665.6 140.8 642.56 140.8c-10.24 0-21.76-1.28-32-2.56-30.72-3.84-44.8-3.84-48.64 7.68-1.28 3.84-5.12 7.68-8.96 8.96-2.56 8.96-7.68 25.6-24.32 25.6h-1.28c-6.4 0-11.52-5.12-12.8-11.52-3.84-46.08-34.56-53.76-94.72-53.76h-11.52c-47.36 0-70.4 1.28-79.36 33.28-1.28 3.84-3.84 7.68-8.96 8.96-2.56 0-3.84 1.28-6.4 0-2.56 5.12-8.96 8.96-19.2 8.96-56.32 0-64 21.76-64 44.8 0 6.4 0 25.6 5.12 29.44 3.84 2.56 16.64 2.56 32 2.56H281.6c7.68 0 12.8 5.12 12.8 12.8v83.2c0 10.24 8.96 19.2 19.2 19.2s19.2-8.96 19.2-19.2V256c0-7.68 5.12-12.8 12.8-12.8z"
            fill="#231C1C"
          ></path></g
        ></svg
      >
    </div>
    <div class="background-element wizard">
      <svg viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"
        ><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g
          id="SVGRepo_tracerCarrier"
          stroke-linecap="round"
          stroke-linejoin="round"
        ></g><g id="SVGRepo_iconCarrier">
          <g clip-path="url(#clip0_901_2812)">
            <path
              d="M28 1.00024V5.00024H24V1.00024H21V31.0002H31V1.00024H28Z"
              fill="#FFE6EA"
            ></path>
            <path
              d="M21 1V31H16V23C16 23 16 18 11 18C6 18 6 23 6 23V31H1V1H5V5H9V1H13V5H17V1H21Z"
              fill="#FFC44D"
            ></path>
            <path
              d="M16 23V31H6V23C6 23 6 18 11 18C16 18 16 23 16 23Z"
              fill="#668077"
            ></path>
            <path
              d="M21 28V1H17V5H13V1H9V5H5V1H1V31H6V23C6 23 6 18 11 18C16 18 16 23 16 23V31H31V1H28V5H24V1M26 12V14M26 18V20"
              stroke="#000000"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            ></path>
          </g>
          <defs>
            <clipPath id="clip0_901_2812">
              <rect width="32" height="32" fill="white"></rect>
            </clipPath>
          </defs>
        </g></svg
      >
    </div>
    <div class="background-element treasure">
      <svg
        viewBox="-0.5 0 46 46"
        version="1.1"
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink"
        fill="#000000"
        ><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g
          id="SVGRepo_tracerCarrier"
          stroke-linecap="round"
          stroke-linejoin="round"
        ></g><g id="SVGRepo_iconCarrier">
          <title>011-Treasure</title> <desc>Created with Sketch.</desc>
          <defs> </defs>
          <g
            id="Page-1"
            stroke="none"
            stroke-width="1"
            fill="none"
            fill-rule="evenodd"
          >
            <g id="Artboard" transform="translate(-628.000000, -741.000000)">
              <g
                id="011-Treasure"
                transform="translate(628.000000, 741.000000)"
              >
                <path
                  d="M17.763,2.1341 C13.851,1.7411 11.254,2.6021 8.615,4.6301 C-0.567,11.6841 3.862,32.9021 4.709,34.7501 C5.965,37.4911 23.742,45.1861 26.888,45.4941 C30.035,45.8021 42.043,14.3411 42.043,14.3411 C42.043,14.3411 25.426,2.9041 17.763,2.1341"
                  id="Fill-1362"
                  fill="#9A5F5F"
                >
                </path>
                <path
                  d="M36.9991,13.6965 C22.8071,19.5395 25.8871,44.9935 26.8881,45.4945 C27.8891,45.9945 40.5191,39.3895 41.0191,38.7345 C41.5201,38.0805 50.5011,8.1375 36.9991,13.6965"
                  id="Fill-1364"
                  fill="#C27D78"
                >
                </path>
                <path
                  d="M36.4779,13.9304 C39.3339,12.5744 41.2079,12.8724 42.4199,14.0574 L42.4259,14.0544 C42.4259,14.0544 40.5509,10.8614 37.1229,10.8614 C33.9619,10.8614 24.5019,14.2644 22.9999,31.7084 C22.9999,31.7084 14.2849,27.5884 11.2989,26.0094 C8.3129,24.4294 2.5969,20.9154 2.5969,20.9154 C2.5969,20.9154 1.3969,1.3254 17.7629,2.1344 C17.7629,2.1344 15.3659,0.6354 13.0059,0.7094 C-1.5401,1.1624 0.2419,22.8904 0.2419,22.8904 C0.2419,22.8904 5.2089,27.1254 11.7939,30.3604 C18.9999,33.9004 27.2749,36.6074 27.2749,36.6074 C26.1189,35.9144 26.4149,18.7094 36.4779,13.9304"
                  id="Fill-1366"
                  fill="#F1A969"
                >
                </path>
                <path
                  d="M2.5969,20.9151 L4.2849,20.3101 C4.2849,20.3101 2.5969,5.9081 17.7629,2.1341 C1.3969,1.3251 2.5969,20.9151 2.5969,20.9151"
                  id="Fill-1368"
                  fill="#F7BF6D"
                >
                </path>
                <path
                  d="M23.0001,31.7083 L23.2001,29.8173 L4.2851,20.3103 L2.5971,20.9153 C2.5971,20.9153 8.3131,24.4293 11.2991,26.0093 C14.2841,27.5883 23.0001,31.7083 23.0001,31.7083"
                  id="Fill-1370"
                  fill="#FBDF89"
                >
                </path>
                <path
                  d="M39.9739,26.1145 C33.9079,29.6415 28.8179,31.3915 28.8179,31.3915 C28.8179,31.3915 29.7369,32.2675 30.4909,32.2695 C32.6249,32.2735 41.1999,27.3495 41.5329,26.4965 L39.9739,26.1145 Z"
                  id="Fill-1372"
                  fill="#F7BF6D"
                >
                </path>
                <path
                  d="M40.4423,17.3908 C40.4423,17.3908 41.2823,21.4118 39.9743,26.1148 L41.5333,26.4968 C41.5333,26.4968 43.4283,19.1618 40.4423,17.3908"
                  id="Fill-1374"
                  fill="#F1A969"
                >
                </path>
                <path
                  d="M41.5328,26.4967 C41.1728,27.1137 31.2008,32.8007 30.2568,32.2337 C29.3568,31.6937 31.1108,20.6817 37.0028,17.6777 C43.7698,14.2277 41.8928,25.8797 41.5328,26.4967 M36.4778,13.9307 C26.4148,18.7087 25.9268,35.8667 27.0818,36.5607 C28.2938,37.2867 43.1008,29.3977 43.5638,28.6067 C44.0258,27.8147 47.4528,8.7187 36.4778,13.9307"
                  id="Fill-1376"
                  fill="#FBDF89"
                >
                </path>
                <path
                  d="M16.4307,32.4809 L15.8357,38.1959 C15.8357,38.1959 17.1377,37.8119 17.5757,37.3119 C18.0127,36.8109 17.8537,33.0809 17.8537,33.0809 L16.4307,32.4809 Z"
                  id="Fill-1378"
                  fill="#FBDF89"
                >
                </path>
                <path
                  d="M8.7737,28.7536 C8.7737,28.7536 8.6367,34.1346 9.1757,34.9816 C9.7147,35.8286 15.2967,38.5806 15.8357,38.1956 C16.3747,37.8106 16.4307,32.4806 16.4307,32.4806 L8.7737,28.7536 Z"
                  id="Fill-1380"
                  fill="#F1A969"
                >
                </path>
                <path
                  d="M13.152,35.6534 L12.949,34.0314 C13.12,33.9994 13.283,33.9384 13.41,33.8114 C13.788,33.4334 13.737,32.7674 13.294,32.3244 C12.851,31.8824 12.186,31.8304 11.807,32.2084 C11.428,32.5874 11.48,33.2534 11.923,33.6954 C11.949,33.7214 11.981,33.7324 12.008,33.7564 L11.526,34.8184 L13.152,35.6534 Z"
                  id="Fill-1382"
                  fill="#4E433A"
                >
                </path>
                <polygon
                  id="Fill-1384"
                  fill="#7F5253"
                  points="4.59 15.3477 4.392 16.5667 21.423 24.3187"
                >
                </polygon>
                <polygon
                  id="Fill-1386"
                  fill="#7F5253"
                  points="6.5085 10.0889 5.9615 11.1389 23.2005 18.9849"
                >
                </polygon>
                <polygon
                  id="Fill-1388"
                  fill="#7F5253"
                  points="10.2982 5.6616 9.3452 6.4856 26.4702 14.2796"
                >
                </polygon>
                <polygon
                  id="Fill-1390"
                  fill="#7F5253"
                  points="14.963 3.0182 13.758 3.5342 30.585 11.3432"
                >
                </polygon>
              </g>
            </g>
          </g>
        </g></svg
      >
    </div>
    <div class="background-element ghost">
      <svg
        viewBox="-20.71 0 173.8 173.8"
        xmlns="http://www.w3.org/2000/svg"
        fill="#a1854a"
        stroke="#a1854a"
        ><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g
          id="SVGRepo_tracerCarrier"
          stroke-linecap="round"
          stroke-linejoin="round"
        ></g><g id="SVGRepo_iconCarrier">
          <defs>
            <style>
              .cls-1 {
                fill: #ffffff;
              }
            </style>
          </defs>
          <g id="Layer_2" data-name="Layer 2">
            <g id="Layer_1-2" data-name="Layer 1">
              <path
                d="M132.39,134.48a20.26,20.26,0,0,1-2.1,3.09,35.23,35.23,0,0,1-3.51,2.7c-1.43-.58-2.7-1.19-4-1.63-8.15-2.69-15.51-.21-20,7.2-2.19,3.63-3.62,7.72-5.62,12.08-3.37,3.28-7.31,2.6-11.25-.06-1.17-.8-2.12-1.93-3.27-2.78-7.75-5.7-16.18-3.43-20.35,5.46-2.88,6.12-6.76,6.67-10.46,1.08-2.65-4-5.26-8-10.55-7.44a17.54,17.54,0,0,0-13.42,8.28c-1.39,2.16-2.43,4.55-3.85,6.69a15.87,15.87,0,0,1-3.39,3.69c-1.89,1.48-4.11,1.28-5.16-.78a115,115,0,0,1-7-15.54c-3.38-10.16-2.14-20.44,1.13-30.39a48.6,48.6,0,0,0-.45-32Q5.79,84.41,2.93,74.51a68.21,68.21,0,0,1,2.4-46.23c5.2-12.54,15.07-20.56,28-24.81,14.94-4.91,29.89-4.35,44.77,0a42.88,42.88,0,0,1,15.66,8.72c7.65,6.54,14.47,13.9,17.72,23.79,1.7,5.15,3.49,10.29,4.9,15.51a15.36,15.36,0,0,1,.34,6.77c-2.76,13.6-1.92,27.31-1.3,41,.26,5.74,2.54,11.09,5.6,16.06C124.91,121.64,128.6,128.07,132.39,134.48ZM55.82,149.32c19.95-9.42,20.2-7.16,34.46-2.42a12.64,12.64,0,0,0,1.44-2c4-8.59,10.33-14.23,19.88-16,1.21-.23,2.26-1.36,3.54-2.17-1.31-2.4-2.25-4.49-3.52-6.36-4.65-6.89-6.43-14.66-6.75-22.74-.34-8.56-.59-17.17-.11-25.71.71-12.8-.5-25.13-6.33-36.72C92.2,22.84,83,14,69,11.09a61.32,61.32,0,0,0-25.59-.24c-13.9,3.05-23.23,11.56-28,25.08-3.73,10.54-3,21.39-2.7,32.24a5.65,5.65,0,0,0,.38,1.65,281.08,281.08,0,0,1,8.67,27.63c1.79,7.45,2.3,14.5.5,21.87-1.55,6.37-2.75,12.83-4.31,19.2a29.75,29.75,0,0,0-.2,12.77c.24,1.21,1.07,2.31,1.83,3.87C31.05,146.15,42.52,140.48,55.82,149.32Z"
              ></path>
              <path
                class="cls-1"
                d="M55.82,149.32c-13.3-8.84-24.77-3.17-36.21,5.84-.76-1.56-1.59-2.66-1.83-3.87a29.75,29.75,0,0,1,.2-12.77c1.56-6.37,2.76-12.83,4.31-19.2,1.8-7.37,1.29-14.42-.5-21.87a281.08,281.08,0,0,0-8.67-27.63,5.65,5.65,0,0,1-.38-1.65c-.28-10.85-1-21.7,2.7-32.24,4.77-13.52,14.1-22,28-25.08A61.32,61.32,0,0,1,69,11.09C83,14,92.2,22.84,98.43,35.2c5.83,11.59,7,23.92,6.33,36.72-.48,8.54-.23,17.15.11,25.71.32,8.08,2.1,15.85,6.75,22.74,1.27,1.87,2.21,4,3.52,6.36-1.28.81-2.33,1.94-3.54,2.17-9.55,1.76-15.87,7.4-19.88,16a12.64,12.64,0,0,1-1.44,2C76,142.16,75.77,139.9,55.82,149.32Z"
              ></path>
            </g>
          </g>
        </g></svg
      >
    </div>
    <div class="background-element portal">
      <svg
        viewBox="0 0 48 48"
        id="a"
        xmlns="http://www.w3.org/2000/svg"
        fill="#000000"
        ><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g
          id="SVGRepo_tracerCarrier"
          stroke-linecap="round"
          stroke-linejoin="round"
        ></g><g id="SVGRepo_iconCarrier"
          ><defs
            ><style>
              .b {
                fill: none;
                stroke: #b5b5b5;
                stroke-linecap: round;
                stroke-linejoin: round;
              }
            </style></defs
          ><polygon
            class="b"
            points="24 2.5 5.3483 13.25 5.3483 34.75 24 45.5 42.6517 34.75 42.6517 13.25 24 2.5"
          ></polygon><polygon
            class="b"
            points="24 2.5 11.688 15.547 5.3483 34.75 24 37.4145 42.6517 34.75 36.312 15.547 24 2.5"
          ></polygon><polygon
            class="b"
            points="24 37.4145 11.688 15.547 36.312 15.547 24 37.4145"
          ></polygon><line class="b" x1="24" y1="37.4145" x2="24" y2="45.5"
          ></line><line class="b" x1="11.688" y1="15.547" x2="5.3483" y2="13.25"
          ></line><line
            class="b"
            x1="36.312"
            y1="15.547"
            x2="42.6517"
            y2="13.25"
          ></line><path
            class="b"
            d="M24.6432,23.7244c0,.8269,.6432,1.4701,1.4701,1.4701s1.4701-.6432,1.4701-1.4701v-1.4701c0-.8269-.6432-1.4701-1.4701-1.4701-.735,0-1.4701,.6432-1.4701,1.4701v1.4701Z"
          ></path><path
            class="b"
            d="M20.4167,22.2543c0-.8269,.6432-1.4701,1.4701-1.4701s1.4701,.6432,1.4701,1.4701c0,.3675-.1838,.735-.4594,1.0107-.6432,.4594-2.4808,1.9295-2.4808,1.9295h2.9402"
          ></path></g
        ></svg
      >
    </div>
    <div class="background-element scroll">
      <svg
        viewBox="0 0 128 128"
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink"
        aria-hidden="true"
        role="img"
        class="iconify iconify--noto"
        preserveAspectRatio="xMidYMid meet"
        fill="#000000"
        ><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g
          id="SVGRepo_tracerCarrier"
          stroke-linecap="round"
          stroke-linejoin="round"
        ></g><g id="SVGRepo_iconCarrier">
          <path fill="#d68b52" d="M22.13 18.65h23.19v15.08H22.13z"> </path>
          <ellipse cx="114.59" cy="108.83" rx="9.41" ry="12.65" fill="#f2bd72">
          </ellipse>
          <path
            d="M114.59 96.18h-5.18s.04-63.41.04-74.11s-7.61-15.55-10.42-15.55h-76.9s10.1 1.21 10.23 15.55c.09 10.21 0 62.8 0 79.61s6.37 19.79 6.37 19.79h75.38c.07 0 .14-.01.21-.02c.09 0 .18.02.27.02c5.2 0 9.41-5.66 9.41-12.65c0-6.97-4.21-12.64-9.41-12.64z"
            fill="#ffd8a1"
          >
          </path>
          <path
            d="M114.59 96.18h-5.18s.04-63.41.04-74.11s-7.61-15.55-10.42-15.55h-76.9s10.1 1.21 10.23 15.55c.09 10.21 0 62.8 0 79.61s6.37 19.79 6.37 19.79h75.38c.07 0 .14-.01.21-.02c.09 0 .18.02.27.02c5.2 0 9.41-5.66 9.41-12.65c0-6.97-4.21-12.64-9.41-12.64z"
            fill="#ffd8a1"
          >
          </path>
          <path
            d="M32.26 100.75l.09-9.1s59.53 6.46 77.04-14.12v22.99l-77.13.23z"
            fill="#f2bd72"
          >
          </path>
          <g
            opacity=".6"
            fill="none"
            stroke="#9e673c"
            stroke-width="3.005"
            stroke-linecap="round"
            stroke-miterlimit="10"
          >
            <path
              d="M45.52 30.1c1.17 0 2.35-.02 3.52 0c.89.02 1.72.14 2.63.05c.98-.1 1.96-.29 2.96-.26c1.22.04 2.39.41 3.62.41c.6 0 1.14-.17 1.73-.2c.68-.03 1.36 0 2.04 0h4.3"
              opacity=".77"
            >
            </path>
            <path
              d="M79.01 30.1c.73 0 1.49.06 2.21-.05c1.12-.17 2.19-.63 3.36-.53c1.25.11 2.31.84 3.54 1.03c1.99.29 3.86-.9 5.87-1.09c.64-.06 1.28-.02 1.92.03c1.45.12 2.88.3 4.31.53"
              opacity=".77"
            >
            </path>
            <path
              d="M45.52 53.51c1 0 2.04.1 3.03 0c1.39-.14 2.73-.63 4.16-.56c1.44.07 2.76.7 4.17.95c1.94.33 3.89-.08 5.81-.33c2.05-.27 4-.05 6.06-.05h7.7"
              opacity=".77"
            >
            </path>
            <path
              d="M86.77 53.51c.74 0 1.48-.01 2.22 0c1.25.02 2.18-.38 3.37-.61c1.69-.33 3.38.19 5.05.36c1.23.12 2.52.26 3.75.25"
              opacity=".77"
            >
            </path>
            <path
              d="M68.56 76.96c1.34 0 2.74-.09 4.05.09c2.27.32 4.18-.39 6.41-.62c2.09-.22 4.18.2 6.28.37c2.18.18 4.37.1 6.56.02c2.27-.08 4.54.13 6.83.13"
              opacity=".77"
            >
            </path>
            <path
              d="M44.58 76.96c1.96 0 3.89.37 5.85.23c.66-.05 1.32-.14 1.99-.17c1.33-.07 2.67.23 3.98.08c.87-.1 1.7-.14 2.58-.14"
              opacity=".77"
            >
            </path>
            <path
              d="M68.56 18.48c1.34 0 2.74-.09 4.05.09c2.27.32 4.18-.39 6.41-.62c2.09-.22 4.18.2 6.28.37c2.18.18 4.37.1 6.56.02c2.27-.08 4.54.13 6.83.13"
              opacity=".77"
            >
            </path>
            <path
              d="M44.58 18.48c1.96 0 3.89.37 5.85.23c.66-.05 1.32-.14 1.99-.17c1.33-.07 2.67.23 3.98.08c.87-.1 1.7-.14 2.58-.14"
              opacity=".77"
            >
            </path>
            <path
              d="M45.52 41.87c.96 0 1.89.04 2.83.11c1.68.12 3.24-.64 4.87-.81c2.05-.21 4.07.45 6.1.75c2.01.3 4.05.12 6.07 0c.92-.06 1.88-.14 2.8-.12c.99.02 1.93.33 2.92.32c1.27-.01 2.44-.57 3.69-.76c2.78-.43 5.55.97 8.36.78c.92-.06 1.81-.29 2.72-.38c1.12-.11 2.25-.01 3.37.09l4.98.45"
              opacity=".77"
            >
            </path>
            <path
              d="M45.52 65.26c.96 0 1.89.04 2.83.11c1.68.12 3.24-.64 4.87-.81c2.05-.21 4.07.45 6.1.75c2.01.3 4.05.12 6.07 0c.92-.06 1.88-.14 2.8-.12c.99.02 1.93.33 2.92.32c1.27-.01 2.44-.57 3.69-.76c2.78-.43 5.55.97 8.36.78c.92-.06 1.81-.29 2.72-.38c1.12-.11 2.25-.01 3.37.09l4.98.45"
              opacity=".77"
            >
            </path>
            <path
              d="M58.39 88.62c.52.01.99-.11 1.5-.13c.74-.04 1.47.17 2.2.28c1.75.26 3.58.39 5.32.01c.98-.22 1.91-.59 2.91-.73c2.51-.36 4.99.76 7.54.75c2.2-.02 4.56-1.02 6.73-.44c1.42.37 2.88.28 4.38.28"
              opacity=".77"
            >
            </path>
          </g>
          <path
            d="M38.25 96.18v6.17h84.41c-1.64-3.69-4.64-6.17-8.07-6.17H38.25z"
            fill="#fcebcd"
          >
          </path>
          <ellipse cx="38.73" cy="108.83" rx="9.41" ry="12.65" fill="#f2bd72">
          </ellipse>
          <path
            d="M45.71 108.17c0 5.33-3.34 8.35-6.92 9.33c-4.61 1.26-6.53.16-6.53.16V98.68s3.25-.82 6.72.16c3.54.99 6.73 4 6.73 9.33z"
            fill="#784d30"
          >
          </path>
          <ellipse cx="33.48" cy="108.17" rx="6.72" ry="9.65" fill="#784d30">
          </ellipse>
          <ellipse cx="33.48" cy="108.18" rx="6.72" ry="9.65" fill="#784d30">
          </ellipse>
          <ellipse cx="24.86" cy="108.18" rx="4.46" ry="4.5" fill="#ba793e">
          </ellipse>
          <path
            d="M33.02 105.44c1.27.39 2.82 3.08.18 5.66c-.67.65.02 2.09.48 3.3c.58 1.54 1 2.37 2.34 1.45c1.8-1.22 3.51-4.71 3.51-7.67c0-4.79-2.71-8.68-6.05-8.68c-1.72 0-3.06.55-4.19 2.88c-.5 1.04-.55 2.37 1.04 2.53c0 .01 1.78.26 2.69.53z"
            fill="#ba793e"
          >
          </path>
          <ellipse cx="22.34" cy="20.09" rx="10.09" ry="13.57" fill="#f2bd72">
          </ellipse>
          <g>
            <path
              d="M29.32 19.43c0 5.33-3.34 8.35-6.92 9.33c-4.61 1.26-6.53.16-6.53.16V9.94s3.25-.82 6.72.16c3.53.98 6.73 4 6.73 9.33z"
              fill="#784d30"
            >
            </path>
            <ellipse cx="17.09" cy="19.43" rx="6.72" ry="9.65" fill="#784d30">
            </ellipse>
            <ellipse cx="17.09" cy="19.44" rx="6.72" ry="9.65" fill="#784d30">
            </ellipse>
            <ellipse cx="8.46" cy="19.44" rx="4.46" ry="4.5" fill="#ba793e">
            </ellipse>
            <path
              d="M16.62 16.7c1.27.39 2.82 3.08.18 5.66c-.67.65.02 2.09.48 3.3c.58 1.54 1 2.37 2.34 1.45c1.8-1.22 3.51-4.71 3.51-7.67c0-4.79-2.71-8.68-6.05-8.68c-1.72 0-3.06.55-4.19 2.88c-.5 1.04-.55 2.37 1.04 2.53c0 .01 1.79.25 2.69.53z"
              fill="#ba793e"
            >
            </path>
          </g>
        </g></svg
      >
    </div>
    <div class="background-element crystal">
      <svg
        viewBox="0 0 512 512"
        xmlns="http://www.w3.org/2000/svg"
        fill="#aa9064"
        stroke="#aa9064"
        ><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g
          id="SVGRepo_tracerCarrier"
          stroke-linecap="round"
          stroke-linejoin="round"
        ></g><g id="SVGRepo_iconCarrier"
          ><path
            fill="#ab9373"
            d="M127.4 14.4c-74.28 104.4-5.3 124.5 37.5 148.1 7.4-16.1 15.9-30.7 27.3-44.4-52-22.1-61.4-70.2-64.8-103.7zm257.2 0c-3.4 33.5-12.8 81.6-64.8 103.7 11.4 13.7 19.9 28.3 27.3 44.4 42.9-23.6 111.7-43.7 37.5-148.1zM256 89.5c-45.3 27.6-62.3 54.4-78.4 94.8 47.9 11.7 108.8 11.7 156.8 0-16.1-40.4-33.1-67.2-78.4-94.8zM148.8 196.1c-5.3 10.3-24.6 74.7-24.8 91.8 4.7-4.9 9.5-9.9 14.2-14.9l6.6 5.8c1.1-25.6 12.6-52.8 25.1-77.5-6.5-1.6-14.5-3.3-21.1-5.2zm214.4 0c-6.2 1.7-15.3 3.9-21.1 5.2 12.4 24.7 24 51.9 25 77.5l6.7-5.8 14.2 14.9c10.5-12.4-19.5-81.5-24.8-91.8zm-173.6 8.8l-7.9 23.8c22.8 6.5 43.6 12.6 69 20l-6.5 17c-5.6-1.6-11.4-3.2-17.1-4.9-2.9 5.8-9.5 9.6-16.7 9.6-10.2 0-18.3-7.2-18.3-16 0-1.3.1-2.5.4-3.7l-16.6-4.7-13.9 41.7 36.1 34.3 14.6-27h86.5l14.7 27 36.1-34.3-13.9-41.7c-5.4 1.5-10.8 3-16.1 4.6.4 1.2.5 2.5.5 3.8 0 8.8-8.1 16-18.4 16-7.3 0-13.9-3.9-16.8-9.7-5.9 1.7-11.7 3.3-17.5 5l-6.6-17c23.2-6.8 44.4-12.9 69.1-20l-8-23.8c-47.7 11.1-84.9 11.1-132.7 0zm-43.2 94.8l-70.42 73.7h47.42l-18.4 48h57.5L147.8 447l37.5-10.9 70.7 61.5 70.7-61.5 37.4 10.9-14.7-25.6h57.5l-18.3-48H436l-70.5-73.7-57.4 49.9-21.9-38.2h-60.7l-21.9 38.2zm91.2 25.7h36.8v18h-36.8z"
          ></path></g
        ></svg
      >
    </div>
  </div>
  <div class="content-overlay"></div>

  <header class="text-center mb-12 relative">
    <h1 class="text-6xl font-medieval text-dnd-gold mb-2">
      Dungeons & Dragons
    </h1>
    <h2 class="text-3xl text-dnd-copper">OnChain Adventures</h2>
  </header>

  <main>
    <div class="mb-12">
      {#if !isConnected}
        <button class="connect-button" on:click={connectWallet}>
          <span>Connect Wallet</span>
          <span class="text-2xl">⚔️</span>
        </button>
      {:else}
        <div class="connected-wallet">
          <span class="wallet-address"
            >Connected: {account.slice(0, 6)}...{account.slice(-4)}</span
          >
        </div>
      {/if}
    </div>

    {#if isConnected}
      {#if !showHistory}
        <div class="game-section">
          {#if questStatus === "not_joined"}
            <div class="text-center">
              <button class="quest-button" on:click={joinQuest}>
                <span>Join the Quest</span>
                <span class="text-2xl">🏰</span>
              </button>
            </div>
          {:else if questStatus === "pending"}
            <div class="quest-status">
              <p class="text-xl text-dnd-gold">
                Awaiting the Council's decision...
              </p>
              <div class="loading-spinner"></div>
            </div>
          {:else if questStatus === "rejected"}
            <div class="quest-status">
              <p class="text-xl text-dnd-gold">
                The Council has deemed you not ready for this quest.
              </p>
              <p class="text-dnd-copper">
                Return when the stars align differently, brave adventurer.
              </p>
              <button class="quest-button mt-4" on:click={joinQuest}>
                <span>Try Again</span>
                <span class="text-2xl">🔄</span>
              </button>
            </div>
          {:else if questStatus === "accepted"}
            <div class="quest-progress">
              <div class="round-indicator">
                {#each Array(maxRounds) as _, i}
                  <div
                    class="round-dot {i + 1 === currentRound ? 'active' : ''}"
                  ></div>
                {/each}
              </div>

              <div class="round-content">
                <h3 class="text-3xl font-medieval text-dnd-gold mb-6">
                  Round {currentRound}
                </h3>
                <p class="text-xl mb-8">{roundDescriptions[currentRound]}</p>

                <div class="action-buttons">
                  {#each allActions as action}
                    <button
                      class="action-button"
                      on:click={() => performAction(action)}
                      disabled={isLoading}
                    >
                      <span class="action-label">{action.label}</span>
                      <span class="action-subtext">{action.subtext}</span>
                      {#if isLoading}
                        <div class="button-spinner"></div>
                      {/if}
                    </button>
                  {/each}
                </div>
              </div>
            </div>
          {/if}
        </div>
      {:else}
        <div class="history-section">
          <h3 class="text-3xl font-medieval text-dnd-gold mb-6 text-center">
            Your Quest Chronicle
          </h3>
          <div class="history-timeline">
            {#each actionHistory as entry, i}
              <div class="history-entry">
                <div class="history-round">Round {entry.round}</div>
                <div class="history-description">{entry.description}</div>
                <div class="history-action">You chose to: {entry.action}</div>
              </div>
            {/each}
          </div>
          <div class="text-center mt-8">
            <button
              class="quest-button"
              on:click={() => {
                currentRound = 1;
                actionHistory = [];
                showHistory = false;
              }}
            >
              <span>Begin New Quest</span>
              <span class="text-2xl">��</span>
            </button>
          </div>
        </div>
      {/if}
    {/if}
  </main>

  <!-- Connection Prompt -->
  {#if showConnectionPrompt}
    <div class="connection-prompt">
      <p class="prompt-text">{promptMessage}</p>
    </div>
  {/if}

  <QuestLog {showQuestLog} {eventLog} on:close={() => (showQuestLog = false)} />
  <Tavern {showTavern} {userHeroes} on:close={() => (showTavern = false)} />
  <Footer {isConnected} {handleNavClick} />
</div>
